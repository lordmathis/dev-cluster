# /apps/prod/authelia/values.yaml
domain: 'example.com'
configMap:
  authentication_backend:
    file:
      enabled: true
      path: /users/users_database.yaml
      password:
        algorithm: argon2
    ldap:
      enabled: false
  access_control:
    rules:
      - domain: '*.example.com'
        policy: one_factor
  session:
    redis:
      enabled: false
    cookies:
      - domain: 'example.com'
        authelia_url: 'https://auth.example.com'
        name: 'authelia_session'
  storage:
    local:
      enabled: true
      path: /config/db.sqlite3
    postgres:
      enabled: false
  notifier:
    smtp:
      enabled: false
    filesystem:
      enabled: true

pod:
  extraVolumeMounts:
  - name: authelia-users-vol
    mountPath: /users
  extraVolumes:
  - name: authelia-users-vol
    secret:
      secretName: authelia-users-secret

ingress:
  enabled: true
  ingressClassName: "traefik"
  traefikCRD:
    enabled: true
    middlewares:
      auth:
        nameOverride: "authelia"
        authResponseHeaders:
          - "Remote-User"
          - "Remote-Groups"
          - "Remote-Email"
          - "Remote-Name"
    matchOverride: Host(`auth.example.com`)
    entryPoints:
      - "websecure"